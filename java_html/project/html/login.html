<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>login</title>
        <link rel="stylesheet" href="/project/css/header.css" />
        <link rel="stylesheet" href="/project/css/login.css" />
        <link rel="stylesheet" href="/project/css/footer.css" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    </head>
    <body>
        <header id="header"></header>
        <section>
            <div id="container">
                <form action="">
                    <div class="login">
                        <h2 class="lo">로그인</h2>
                        <input type="text" id="uid" class="inbox" placeholder="아이디" style="width: 400px" />
                        <input type="password" id="upw" class="inbox" placeholder="비밀번호" style="width: 400px" />
                        <ul class="find">
                            <li><a href="idFind.html">아이디 찾기</a></li>
                            <li><a href="pwFind.html">비밀번호 찾기</a></li>
                        </ul>
                        <button type="button" class="loginBtn button" id="login">로그인</button>
                        <a href="signUp.html">
                            <button type="button" class="signUp" id="login">회원가입</button>
                        </a>
                    </div>
                </form>
            </div>
        </section>
        <footer id="footer"></footer>
        <script src="/project/js/header_footer.js"></script>
        <script>
            const input = document.querySelectorAll(".inbox");
            const btn = document.querySelector(".button");
            function buttonActivation() {
                let id = document.querySelector('input[type="text"]').value;
                let pw = document.querySelector('input[type="password"]').value;
                let idReg = /^(?=.*\d)(?=.*[a-z])[\da-zA-Z]{6,}$/.test(id);
                // /^(?=.*\d)(?=.*[a-z])(?=.*[!@#$]) 숫자와 소문자 알파벳, !@#$중 하나의 특수문자가 무조건 하나 이상 들어가야한다
                // [\da-zA-Z!@#$]{7,15}$/ 숫자와 소문자, 대문자 알파벳, !@#$을 써도 된다
                let pwReg = /^(?=.*\d)(?=.*[a-z])(?=.*[!@#$])[\da-zA-Z!@#$]{7,15}$/.test(pw);

                if (idReg && pwReg) {
                    btn.style.setProperty("background-color", "rgb(27, 188, 155)");
                    btn.disabled = false;
                } else {
                    btn.style.setProperty("background-color", "#aaa");
                    btn.disabled = true;
                }

                // btn.style.setProperty("background-color", `${flag ? "rgb(27, 188, 155)" : "#aaa"}`);
                // btn.disabled = !flag;

                let flag = idReg && pwReg;
                console.log(id, pw, idReg, pwReg, flag);
                return flag;
            }
            function buttonClick() {
                flag = buttonActivation();
                if (flag) {
                    location.href = "main.html";
                } else {
                    alert("아이디 혹은 비밀번호를 확인해주세요");
                }
            }
            document.querySelector(".button").addEventListener("click", buttonClick);
            document.querySelectorAll(".inbox").forEach((node) => {
                node.addEventListener("input", buttonActivation);
            });
        </script>
    </body>
</html>
